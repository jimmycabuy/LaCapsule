{"ast":null,"code":"var _jsxFileName = \"/Users/jimmycabuy/Documents/jim/DIVERS/code/lacapsule/projet/mymoviz/part5/reactapp/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\nimport Navbar from \"./components/navbar.jsx\";\nimport Movie from \"./components/movie.jsx\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [movieList, setMovieList] = useState([]);\n  const [moviesCount, setMoviesCount] = useState(0);\n  const [moviesWishList, setMoviesWishList] = useState([]);\n  useEffect(() => {\n    async function loadMovie() {\n      var rawResponse = await fetch(\"/new-movies\");\n      var response = await rawResponse.json();\n      setMovieList(response);\n      var rawResponse2 = await fetch(\"/wishlist-movie\");\n      var response2 = await rawResponse2.json();\n      var wishListFromDB = response2.allMovies.map(movie => {\n        return {\n          name: movie.name,\n          img: movie.img\n        };\n      });\n      setMovieList(wishListFromDB);\n      setMoviesCount(response2.allMovies.length);\n    }\n\n    loadMovie();\n  }, []);\n\n  var handleClickAddMovie = async (movieName, image) => {\n    await fetch('/wishlist-movie', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body: `name=${movieName}&img=${image}`\n    });\n    setMoviesCount(moviesCount + 1);\n    setMoviesWishList([...moviesWishList, {\n      name: movieName,\n      img: image\n    }]);\n  };\n\n  var handleClickRemoveMovie = async movieName => {\n    await fetch(`/wishlist-movie/${movieName}`, {\n      method: 'DELETE'\n    });\n    setMoviesCount(moviesCount - 1);\n    setMoviesWishList(moviesWishList.filter(e => e.name !== movieName));\n  };\n\n  var moviesList = [];\n\n  for (var i = 0; i < 20; i++) {\n    var _movieList$response, _movieList$response2, _movieList$response3, _movieList$response4, _movieList$response5;\n\n    moviesList.push( /*#__PURE__*/_jsxDEV(Movie, {\n      movieName: (_movieList$response = movieList.response) === null || _movieList$response === void 0 ? void 0 : _movieList$response.results[i].original_title,\n      movieDesc: (_movieList$response2 = movieList.response) === null || _movieList$response2 === void 0 ? void 0 : _movieList$response2.results[i].overview,\n      movieImg: \"https://image.tmdb.org/t/p/w500\" + ((_movieList$response3 = movieList.response) === null || _movieList$response3 === void 0 ? void 0 : _movieList$response3.results[i].backdrop_path),\n      globalRating: (_movieList$response4 = movieList.response) === null || _movieList$response4 === void 0 ? void 0 : _movieList$response4.results[i].vote_average,\n      globalCountRating: (_movieList$response5 = movieList.response) === null || _movieList$response5 === void 0 ? void 0 : _movieList$response5.results[i].vote_count,\n      handleClickAddMovieParent: handleClickAddMovie,\n      handleClickRemoveMovieParent: handleClickRemoveMovie\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this));\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"main\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Navbar, {\n              countfilms: moviesCount,\n              wishfilms: moviesWishList\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), moviesList]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"TXLUHd+ifwb9cxfNZ1P0Gfpy3sM=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/jimmycabuy/Documents/jim/DIVERS/code/lacapsule/projet/mymoviz/part5/reactapp/src/App.js"],"names":["React","useState","useEffect","Navbar","Movie","App","movieList","setMovieList","moviesCount","setMoviesCount","moviesWishList","setMoviesWishList","loadMovie","rawResponse","fetch","response","json","rawResponse2","response2","wishListFromDB","allMovies","map","movie","name","img","length","handleClickAddMovie","movieName","image","method","headers","body","handleClickRemoveMovie","filter","e","moviesList","i","push","results","original_title","overview","backdrop_path","vote_average","vote_count"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\nimport Navbar from \"./components/navbar.jsx\";\nimport Movie from \"./components/movie.jsx\";\n\nfunction App() {\n  const [movieList, setMovieList] = useState([]);\n  const [moviesCount, setMoviesCount] = useState(0);\n  const [moviesWishList, setMoviesWishList] = useState([]);\n\n  useEffect(() => {\n    async function loadMovie() {\n      var rawResponse = await fetch(\"/new-movies\");\n      var response = await rawResponse.json();\n      setMovieList(response);\n\n      var rawResponse2 = await fetch(\"/wishlist-movie\");\n      var response2 = await rawResponse2.json();\n var wishListFromDB = response2.allMovies.map((movie) => {\n   return (\n     {name:movie.name, img: movie.img}\n   )\n    })\n   setMovieList(wishListFromDB);\n   setMoviesCount(response2.allMovies.length);\n    }\n    loadMovie();\n  }, []);\n\n\n  var handleClickAddMovie = async (movieName, image) => {\n    await fetch('/wishlist-movie', {\n    method: 'POST',\n    headers: {'Content-Type':'application/x-www-form-urlencoded'},\n    body: `name=${movieName}&img=${image}`\n});\n    setMoviesCount(moviesCount + 1);\n    setMoviesWishList([...moviesWishList, { name: movieName, img: image }]);\n  };\n\n  var handleClickRemoveMovie = async (movieName) => {\n      await fetch(`/wishlist-movie/${movieName}`, {\n      method: 'DELETE'\n  });\n    setMoviesCount(moviesCount - 1);\n    setMoviesWishList(moviesWishList.filter((e) => e.name !== movieName));\n  };\n\n    var moviesList = [];\n    for (var i = 0; i < 20; i++) {\n      moviesList.push(\n        <Movie\n          movieName={movieList.response?.results[i].original_title}\n          movieDesc={movieList.response?.results[i].overview}\n          movieImg={\"https://image.tmdb.org/t/p/w500\" + movieList.response?.results[i].backdrop_path}\n          globalRating={movieList.response?.results[i].vote_average}\n          globalCountRating={movieList.response?.results[i].vote_count}\n          handleClickAddMovieParent={handleClickAddMovie}\n          handleClickRemoveMovieParent={handleClickRemoveMovie}\n        />\n      );\n    }\n\n  return (\n    <div>\n      <main>\n        <div className=\"container\">\n          <div className=\"row\">\n            <div>\n              <Navbar countfilms={moviesCount} wishfilms={moviesWishList} />\n            </div>\n            {moviesList}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}